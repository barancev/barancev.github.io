---
layout: article
title: ...почему зависимости между тестами это плохо?
excerpt: Вообще-то это не всегда плохо, иногда это вполне приемлемо. Вопрос лишь в том, как определить, где это плохо, а где хорошо
tags: [xunit]
image:
  feature: test-deps-are-evil/domino.jpg
  credit: 
  creditlink: 
  teaser: test-deps-are-evil/domono.jpg
  thumb:
comments: true
---
На тренингах по автоматизации я часто говорю, что автотесты надо делать независимыми друг от друга. Типичный диалог развивается так:

- Ой, у меня тест упал!
- Давайте посмотрим, в чём дело. Ага, этот тест выполнялся в ситуации, когда пользователь ещё не залогинился в систему.
- А почему? Я же сделал логин вон в том другом тесте!
- Да, но __этот__ тест выполнялся первым, поэтому в нём логин ещё не случился.
- Ясно... А как сделать, чтобы они выполнялись в нужном порядке?

Логичный вопрос, правда? Такое решение возникшей проблемы напрашивается само собой.

И вот как раз в этом месте я говорю:

- Не стоит так делать. Это плохо, что тест невозможно выполнить, если предварительно не выполнился (причём успешно) какой-то другой тест. То есть плохо, что он зависит от другого теста. Лучше перепроектировать его, сделать независимым. Даже если это потребует некоторых дополнительных усилий.

## Аргументы в пользу независимости

Главной проблемой, которая может возникать, если тесты зависят друг от друга, является так называемый "эффект домино".

<iframe width="560" height="315" src="http://www.youtube.com/watch?v=xDQAonCnjRI" frameborder="0"> </iframe>

Эффект домино проявляется двояко.

Он усложняет разработку и отладку тестов. Если 


Это упрощает отладку тестов

## Контраргументы





Не следует путать упорядочение тестов и создание зависимостей между тестами. Желание выполнять тесты в определённом порядке может быть никак не связано с невозможностью выполнения их в другом порядке. Например, вы можете захотеть, чтобы позитивные тесты выполнялись раньше, чем негативные, потому что позитивные для вас важнее и поэтому вы хотите получать результат их выполнения раньше. Это вовсе не означает, что негативные тесты зависят от позитивных. Да, зависимости определяют порядок, то есть их можно использовать для упорядочения. Но существуют и другие способы, не такие жёсткие.